   firm_ids  market_ids   quality  satellite  wired
0       1.0         1.0  0.649014        1.0    0.0
1       2.0         1.0  1.181166        1.0    0.0
2       3.0         1.0  0.758453        0.0    1.0
3       4.0         1.0  1.109613        0.0    1.0
4       1.0         2.0  0.845551        1.0    0.0
5       2.0         2.0  0.572665        1.0    0.0
6       3.0         2.0  0.558681        0.0    1.0
7       4.0         2.0  0.178380        0.0    1.0
[[ 0.          0.          0.50731475 11.68804445]
 [ 0.          0.          0.46699194  3.39068706]
 [ 0.          0.          0.31397624  5.17627065]
 [ 0.          0.          0.34058469  3.70458181]
 [ 0.          0.          0.6018788   0.94781399]
 [ 0.          0.          0.23012291  0.31987471]
 [ 0.          0.          0.22711872  0.83506063]
 [ 0.          0.          0.74520604  0.34287253]
 [ 0.          0.          0.94499501  0.84312035]
 [ 0.          0.          0.26797803  1.10467673]]
Problem Results Summary:
==================================================================================================================
GMM     Objective      Projected    Reduced Hessian  Reduced Hessian  Clipped  Weighting Matrix  Covariance Matrix
Step      Value      Gradient Norm  Min Eigenvalue   Max Eigenvalue   Shares   Condition Number  Condition Number 
----  -------------  -------------  ---------------  ---------------  -------  ----------------  -----------------
 2    +1.073915E-14  +3.245166E-08   +1.345621E-05    +8.844038E-02      0      +1.778463E+02      +2.744137E+16  
==================================================================================================================

Cumulative Statistics:
===========================================================================
Computation  Optimizer  Optimization   Objective   Fixed Point  Contraction
   Time      Converged   Iterations   Evaluations  Iterations   Evaluations
-----------  ---------  ------------  -----------  -----------  -----------
 00:00:43       Yes          6            14          58951       181836   
===========================================================================

Nonlinear Coefficient Estimates (Robust SEs in Parentheses):
===========================================
 Sigma:       satellite          wired     
---------  ---------------  ---------------
satellite   +4.948899E+00                  
           (+3.269801E+00)                 
                                           
  wired     +0.000000E+00    +5.324269E+00 
                            (+3.479554E+00)
===========================================

Beta Estimates (Robust SEs in Parentheses):
==================================================================
    quality          prices          satellite          wired     
---------------  ---------------  ---------------  ---------------
 +1.800575E+00    -2.999509E+00    +5.942358E+00    +5.685812E+00 
(+7.889484E-01)  (+1.081748E+00)  (+2.261298E+00)  (+2.099403E+00)
==================================================================
Sigma squared: 
[[24.49159887  0.        ]
 [ 0.         28.34784293]]
Standard errors: 
[[32.36382974  0.        ]
 [ 0.         37.05216377]]
Problem Results Summary:
==================================================================================================================
GMM     Objective      Projected    Reduced Hessian  Reduced Hessian  Clipped  Weighting Matrix  Covariance Matrix
Step      Value      Gradient Norm  Min Eigenvalue   Max Eigenvalue   Shares   Condition Number  Condition Number 
----  -------------  -------------  ---------------  ---------------  -------  ----------------  -----------------
 1    +5.266958E+02  +1.746982E+02   +4.125629E+01    +8.786856E+01      0      +3.462368E+04      +5.828823E+03  
==================================================================================================================

Cumulative Statistics:
===========================================================================
Computation  Optimizer  Optimization   Objective   Fixed Point  Contraction
   Time      Converged   Iterations   Evaluations  Iterations   Evaluations
-----------  ---------  ------------  -----------  -----------  -----------
 00:00:23       Yes          1             4          33856       102698   
===========================================================================

Nonlinear Coefficient Estimates (Robust SEs in Parentheses):
===========================================
 Sigma:       satellite          wired     
---------  ---------------  ---------------
satellite   +4.948899E+00                  
           (+4.269460E-01)                 
                                           
  wired     +0.000000E+00    +5.324269E+00 
                            (+4.828386E-01)
===========================================

Beta Estimates (Robust SEs in Parentheses):
==================================================================
    quality          prices          satellite          wired     
---------------  ---------------  ---------------  ---------------
 +1.795555E+00    -2.943975E+00    +5.794252E+00    +5.538137E+00 
(+1.136037E-01)  (+2.824643E-01)  (+7.255481E-01)  (+7.437032E-01)
==================================================================
Sigma squared: 
[[24.49159887  0.        ]
 [ 0.         28.34784293]]
Standard errors: 
[[4.22582495 0.        ]
 [0.         5.14152576]]
Problem Results Summary:
===========================================================================================================================
GMM     Objective      Projected    Reduced Hessian  Reduced Hessian  Clipped  Clipped  Weighting Matrix  Covariance Matrix
Step      Value      Gradient Norm  Min Eigenvalue   Max Eigenvalue   Shares    Costs   Condition Number  Condition Number 
----  -------------  -------------  ---------------  ---------------  -------  -------  ----------------  -----------------
 2    +6.398654E-01  +3.227287E-07   +1.865074E-01    +1.088543E+04      0        0      +1.378890E+04      +3.889440E+16  
===========================================================================================================================

Cumulative Statistics:
===========================================================================
Computation  Optimizer  Optimization   Objective   Fixed Point  Contraction
   Time      Converged   Iterations   Evaluations  Iterations   Evaluations
-----------  ---------  ------------  -----------  -----------  -----------
 00:17:25       No          109           224        1162127      3562224  
===========================================================================

Nonlinear Coefficient Estimates (Robust SEs in Parentheses):
===========================================
 Sigma:       satellite          wired     
---------  ---------------  ---------------
satellite   +1.675381E+00                  
           (+3.194515E-01)                 
                                           
  wired     +0.000000E+00    +1.588044E+00 
                            (+5.769864E-01)
===========================================

Beta Estimates (Robust SEs in Parentheses):
==================================================================
    quality          prices          satellite          wired     
---------------  ---------------  ---------------  ---------------
 +1.053643E+00    -2.006963E+00    +3.965740E+00    +3.934316E+00 
(+8.828108E-02)  (+1.764457E-01)  (+4.395247E-01)  (+3.699292E-01)
==================================================================

Gamma Estimates (Robust SEs in Parentheses):
================================
       1            obs_cost    
---------------  ---------------
 +4.485841E-01    +2.683277E-01 
(+3.245713E-02)  (+1.161620E-02)
================================
Sigma squared: 
[[2.80690244 0.        ]
 [0.         2.52188326]]
Standard errors: 
[[1.07040616 0.        ]
 [0.         1.83255929]]
elasticity_table:
      true_elasticity  estimated_elasticity
0           -7.771133             -7.669846
1           -2.828539             -2.395169
2           -3.313507             -3.161776
3           -3.665961             -3.440724
4           -2.984649             -2.797677
...               ...                   ...
2395        -3.643783             -3.205094
2396        -3.101071             -2.662740
2397        -5.876377             -5.770297
2398        -3.075281             -2.680642
2399        -5.156064             -5.093457

[2400 rows x 2 columns]
true diversion ratio:
            D1        D2        D3        D4
0    -0.300520  0.359917  0.152864  0.186699
1     0.078606 -0.432597  0.220046  0.268751
2     0.033129  0.218355 -0.345458  0.403058
3     0.035739  0.235562  0.356018 -0.372681
4    -0.351565  0.384757  0.109869  0.153809
...        ...       ...       ...       ...
2395  0.208009  0.379154  0.174162 -0.238675
2396 -0.435169  0.120317  0.373315  0.071198
2397  0.389611 -0.301953  0.259034  0.049403
2398  0.321724  0.068938 -0.465830  0.143508
2399  0.199959  0.042847  0.467669 -0.289525

[2400 rows x 4 columns]
estimated diversion ratio:
            D1        D2        D3        D4
0     0.265181  0.476232  0.116410  0.142177
1     0.121226  0.444918  0.195313  0.238543
2     0.026095  0.171993  0.314974  0.486938
3     0.028620  0.188640  0.437280  0.345460
4     0.312919  0.476271  0.087840  0.122970
...        ...       ...       ...       ...
2395  0.177151  0.322907  0.243397  0.256545
2396  0.435351  0.176754  0.325765  0.062130
2397  0.500496  0.264149  0.197658  0.037697
2398  0.276551  0.059259  0.470143  0.194047
2399  0.151668  0.032499  0.557995  0.257839

[2400 rows x 4 columns]
   merge 1 and 2  merge 1 and 3
0       3.122814       2.855901
1       3.095883       2.738424
2       2.739036       2.833370
3       2.746091       2.748687
